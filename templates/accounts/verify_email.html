{% extends 'accounts/base.html' %} {% block title %}ØªØ£ÛŒÛŒØ¯ Ø§ÛŒÙ…ÛŒÙ„{% endblock %} {% block header %} Email Verification Code {% endblock %} {% block content %}
<p class="text-muted">a 6-digit Code Has been sent to your e-mail</p>

{% if error %}
<div class="alert alert-danger">
    {{ error }}
</div>
{% endif %}

<form method="post" class="mt-3">
    {% csrf_token %}
    <div class="mb-3">
        <input type="text" name="code" class="form-control text-center" placeholder="Enter Verification Code" required>
    </div>
    <button type="submit" class="btn btn-success w-100">âœ… Confirm</button>
</form>

<!-- Ø¯Ú©Ù…Ù‡ Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø¯ Ø¨Ø§ ØªØ§ÛŒÙ…Ø± -->
<p class="mt-3 text-center">
    <button id="resend-btn" class="btn btn-secondary" disabled>ðŸ”„   Resend Code (60)</button>
</p>

<style>
    input {
        border-radius: 5px;
        text-align: center;
        font-size: 18px;
    }
    
    button {
        font-weight: bold;
        transition: 0.3s;
    }
    
    .btn-success {
        background: linear-gradient(45deg, #28a745, #218838);
    }
    
    .btn-success:hover {
        background: linear-gradient(45deg, #218838, #1e7e34);
    }
    
    .btn-secondary {
        background: #6c757d;
        border: none;
    }
    
    .btn-secondary:disabled {
        background: #b1b1b1;
        cursor: not-allowed;
    }
</style>

<!-- Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒÙ…Ø± -->
<script>
    let countdown = 60;
    let resendBtn = document.getElementById("resend-btn");

    function updateTimer() {
        resendBtn.textContent = `ðŸ”„  Resend Code (${countdown})`;
        countdown--;
        if (countdown < 0) {
            resendBtn.textContent = "ðŸ”„ Resend Code";
            resendBtn.removeAttribute("disabled");
        } else {
            setTimeout(updateTimer, 1000);
        }
    }

    setTimeout(updateTimer, 1000);

    resendBtn.addEventListener("click", function() {
        resendBtn.setAttribute("disabled", "true");
        countdown = 60;
        updateTimer();
        window.location.href = "{% url 'resend_verification' %}"; // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬Ø¯Ø¯
    });
</script>

{% endblock %}